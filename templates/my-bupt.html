<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My BUPT - æˆ‘çš„æ ¡å›­æ—¥è®°</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
        }

        body {
            background: linear-gradient(to bottom, #87CEEB 0%, #98D8F0 30%, #B0E2FF 100%);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        /* è“å¤©ç™½äº‘èƒŒæ™¯ */
        .sky-background {
            position: fixed;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
        }

        .cloud {
            position: absolute;
            background: white;
            border-radius: 50%;
            opacity: 0.8;
            animation: floatCloud 60s infinite linear;
        }

        .sun {
            position: absolute;
            top: 60px;
            right: 100px;
            width: 100px;
            height: 100px;
            background: radial-gradient(circle, #FFD700 0%, #FF8C00 100%);
            border-radius: 50%;
            box-shadow: 0 0 80px #FFA500;
            animation: sunGlow 4s infinite alternate;
        }

        @keyframes sunGlow {
            0% { box-shadow: 0 0 60px #FFA500; }
            100% { box-shadow: 0 0 100px #FFD700; }
        }

        @keyframes floatCloud {
            0% { transform: translateX(-200px); }
            100% { transform: translateX(calc(100vw + 200px)); }
        }

        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 100;
            padding: 20px 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.25);
        }

        .header h1 {
            color: #2c3e50;
            font-size: 28px;
            font-weight: 700;
            letter-spacing: 1px;
            text-shadow: 0 2px 10px rgba(255,255,255,0.5);
        }

        .back-btn {
            background: rgba(255,255,255,0.25);
            padding: 10px 20px;
            border-radius: 50px;
            color: #2c3e50;
            text-decoration: none;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s;
            border: 1px solid rgba(255, 255, 255, 0.5);
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .back-btn:hover {
            background: rgba(255,255,255,0.4);
            transform: translateX(-3px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.15);
        }

        .main-container {
            padding-top: 100px;
            min-height: 100vh;
            position: relative;
        }

        /* èœ¿èœ’å°è·¯å®¹å™¨ */
        .path-container {
            position: relative;
            width: 100%;
            height: 2000px;
            margin: 0 auto;
            overflow: hidden;
        }

        /* åœ°é¢ */
        .ground {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 400px;
            background: linear-gradient(to top, #8B4513 0%, #A0522D 30%, #D2691E 100%);
            z-index: 1;
        }

        /* çœŸæ­£çš„èœ¿èœ’å°è·¯ - ä½¿ç”¨SVGè·¯å¾„ */
        .winding-path-svg {
            position: absolute;
            top: 200px;
            left: 0;
            width: 100%;
            height: 1600px;
            z-index: 2;
        }

        .path-curve {
            fill: none;
            stroke: #DEB887;
            stroke-width: 12;
            stroke-linecap: round;
            filter: drop-shadow(0 4px 8px rgba(0,0,0,0.2));
        }

        .path-inner {
            fill: none;
            stroke: #F5DEB3;
            stroke-width: 8;
            stroke-linecap: round;
        }

        /* è‰åœ°åŒºåŸŸ */
        .grass-area {
            position: absolute;
            top: 200px;
            left: 0;
            width: 100%;
            height: 1600px;
            background: linear-gradient(to bottom,
                rgba(34, 139, 34, 0.1) 0%,
                rgba(50, 205, 50, 0.2) 20%,
                rgba(60, 179, 113, 0.3) 50%,
                rgba(46, 139, 87, 0.4) 80%,
                rgba(0, 100, 0, 0.5) 100%);
            z-index: 1;
        }

        /* åœºæ™¯å®¹å™¨ - æ²¿ç€èœ¿èœ’è·¯å¾„åˆ†å¸ƒ */
        .scene-container {
            position: absolute;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            z-index: 10;
            text-align: center;
            width: 130px;
            filter: drop-shadow(0 8px 20px rgba(0,0,0,0.3));
        }

        .scene-container:hover {
            transform: scale(1.3) translateY(-15px);
            z-index: 20;
            filter: drop-shadow(0 12px 30px rgba(0,0,0,0.4));
        }

        .scene-image {
            width: 100px;
            height: 100px;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 8px 25px rgba(0,0,0,0.4);
            border: 3px solid white;
            margin: 0 auto 8px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            position: relative;
            transition: all 0.4s;
        }

        .scene-container:hover .scene-image {
            transform: rotate(15deg) scale(1.15);
            box-shadow: 0 20px 40px rgba(0,0,0,0.6);
            border-color: #FFD700;
        }

        .scene-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.8s;
        }

        .scene-container:hover .scene-image img {
            transform: scale(1.2);
        }

        .scene-image::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.2) 0%, rgba(118, 75, 162, 0.2) 100%);
            z-index: 1;
            transition: all 0.3s;
        }

        .scene-container:hover .scene-image::before {
            opacity: 0.1;
        }

        .scene-icon {
            position: absolute;
            top: 8px;
            right: 8px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 50%;
            width: 26px;
            height: 26px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            z-index: 2;
            box-shadow: 0 3px 10px rgba(0,0,0,0.3);
            transition: all 0.3s;
        }

        .scene-container:hover .scene-icon {
            transform: scale(1.3) rotate(20deg);
            background: #FFD700;
        }

        .scene-name {
            background: rgba(44, 62, 80, 0.9);
            color: white;
            padding: 6px 12px;
            border-radius: 15px;
            font-size: 13px;
            font-weight: 600;
            white-space: nowrap;
            opacity: 0;
            transition: all 0.4s;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.3);
            transform: translateY(10px) scale(0.9);
            display: inline-block;
        }

        .scene-container:hover .scene-name {
            opacity: 1;
            transform: translateY(0) scale(1);
        }

        /* æ ‘æœ¨è£…é¥° */
        .tree {
            position: absolute;
            z-index: 3;
            animation: sway 8s infinite ease-in-out;
        }

        .tree-trunk {
            width: 20px;
            height: 80px;
            background: #8B4513;
            border-radius: 10px;
            margin: 0 auto;
        }

        .tree-top {
            width: 100px;
            height: 100px;
            background: #228B22;
            border-radius: 50%;
            margin-top: -60px;
            position: relative;
        }

        .tree-top::before, .tree-top::after {
            content: '';
            position: absolute;
            background: #228B22;
            border-radius: 50%;
        }

        .tree-top::before {
            width: 80px;
            height: 80px;
            top: -20px;
            left: 10px;
        }

        .tree-top::after {
            width: 60px;
            height: 60px;
            top: -40px;
            left: 20px;
        }

        @keyframes sway {
            0%, 100% { transform: translateX(0) rotate(0); }
            33% { transform: translateX(3px) rotate(1deg); }
            66% { transform: translateX(-3px) rotate(-1deg); }
        }

        /* èŠ±æœµè£…é¥° */
        .flower {
            position: absolute;
            z-index: 4;
            animation: sway 6s infinite ease-in-out;
        }

        .flower-stem {
            width: 3px;
            height: 40px;
            background: #228B22;
            margin: 0 auto;
        }

        .flower-head {
            width: 30px;
            height: 30px;
            background: #FF69B4;
            border-radius: 50%;
            margin-top: -15px;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #FFD700;
            font-size: 12px;
        }

        /* å°é¸Ÿ */
        .bird {
            position: absolute;
            color: #333;
            font-size: 24px;
            animation: fly 15s infinite linear;
            z-index: 0;
        }

        @keyframes fly {
            0% { transform: translateX(-100px) translateY(0); }
            25% { transform: translateX(25vw) translateY(-30px); }
            50% { transform: translateX(50vw) translateY(0); }
            75% { transform: translateX(75vw) translateY(20px); }
            100% { transform: translateX(calc(100vw + 100px)) translateY(0); }
        }

        /* è´è¶ */
        .butterfly {
            position: absolute;
            color: #FF69B4;
            font-size: 20px;
            animation: flutter 8s infinite ease-in-out;
            z-index: 0;
        }

        @keyframes flutter {
            0%, 100% { transform: translateY(0) rotate(0); }
            25% { transform: translateY(-20px) rotate(10deg); }
            50% { transform: translateY(0) rotate(0); }
            75% { transform: translateY(-10px) rotate(-10deg); }
        }

        /* æ—¥è®°æœ¬å¼¹çª— */
        .diary-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.85);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            backdrop-filter: blur(10px);
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .diary-container {
            width: 90%;
            max-width: 900px;
            height: 85vh;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border-radius: 20px;
            box-shadow: 0 40px 80px rgba(0,0,0,0.5);
            overflow: hidden;
            display: flex;
            animation: slideUp 0.4s ease;
            border: 1px solid rgba(255,255,255,0.3);
        }

        @keyframes slideUp {
            from { transform: translateY(40px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        /* æ—¥è®°æœ¬å·¦ä¾§ - å°é¢ */
        .diary-cover {
            width: 30%;
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.95) 0%, rgba(118, 75, 162, 0.95) 100%);
            padding: 40px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: white;
            position: relative;
            overflow: hidden;
        }

        .diary-cover::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxkZWZzPjxwYXR0ZXJuIGlkPSJwYXR0ZXJuIiB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHBhdHRlcm5Vbml0cz0idXNlclNwYWNlT25Vc2UiIHBhdHRlcm5UcmFuc2Zvcm09InJvdGF0ZSg0NSkiPjxyZWN0IHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0icmdiYSgyNTUsMjU1LDI1NSwwLjA4KSIvPjwvcGF0dGVybj48L2RlZnM+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0idXJsKCNwYXR0ZXJuKSIvPjwvc3ZnPg==');
        }

        .diary-location-emoji {
            font-size: 52px;
            margin-bottom: 20px;
            z-index: 1;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .diary-title {
            font-size: 30px;
            font-weight: 800;
            margin-bottom: 10px;
            text-align: center;
            text-shadow: 0 2px 15px rgba(0,0,0,0.3);
            z-index: 1;
        }

        .diary-location {
            font-size: 18px;
            margin-bottom: 30px;
            text-align: center;
            opacity: 0.95;
            z-index: 1;
            padding: 8px 20px;
            background: rgba(255,255,255,0.15);
            border-radius: 25px;
            backdrop-filter: blur(5px);
        }

        /* æ—¥è®°æœ¬å³ä¾§ - å†…å®¹åŒº */
        .diary-content {
            width: 70%;
            padding: 40px;
            display: flex;
            flex-direction: column;
            position: relative;
        }

        .close-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 40px;
            height: 40px;
            background: rgba(0,0,0,0.1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 24px;
            color: #666;
            transition: all 0.3s;
            z-index: 2;
        }

        .close-btn:hover {
            background: rgba(0,0,0,0.2);
            color: #333;
            transform: rotate(90deg);
        }

        .diary-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            border-bottom: 2px solid #e0e0e0;
            padding-bottom: 10px;
        }

        .tab-btn {
            padding: 10px 25px;
            background: transparent;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            color: #666;
            cursor: pointer;
            transition: all 0.3s;
        }

        .tab-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.3);
        }

        .tab-btn:hover:not(.active) {
            background: #f0f0f0;
            color: #333;
        }

        /* æŸ¥çœ‹æ—¥è®°åŒºåŸŸ */
        .diary-list {
            flex: 1;
            overflow-y: auto;
            padding-right: 10px;
        }

        .diary-item {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.08);
            border-left: 5px solid #667eea;
            transition: all 0.3s;
            cursor: pointer;
        }

        .diary-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
        }

        .diary-date {
            font-size: 14px;
            color: #667eea;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .diary-preview {
            font-size: 14px;
            color: #555;
            line-height: 1.6;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .no-diaries {
            text-align: center;
            padding: 40px;
            color: #999;
            font-size: 16px;
        }

        /* å†™æ—¥è®°åŒºåŸŸ */
        .write-diary {
            flex: 1;
            display: flex;
            flex-direction: column;
            display: none;
        }

        .diary-textarea {
            flex: 1;
            width: 100%;
            padding: 20px;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            font-size: 16px;
            line-height: 1.6;
            resize: none;
            margin-bottom: 20px;
            background: white;
            transition: all 0.3s;
        }

        .diary-textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.1);
        }

        .diary-actions {
            display: flex;
            gap: 15px;
        }

        .save-btn, .cancel-btn {
            flex: 1;
            padding: 15px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .save-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .save-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 25px rgba(102, 126, 234, 0.3);
        }

        .cancel-btn {
            background: #f0f0f0;
            color: #666;
        }

        .cancel-btn:hover {
            background: #e0e0e0;
            color: #333;
        }

        /* æ—¥è®°è¯¦æƒ…å¼¹çª— */
        .diary-detail-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.85);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1100;
            backdrop-filter: blur(10px);
        }

        .diary-detail {
            width: 80%;
            max-width: 600px;
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 40px 80px rgba(0,0,0,0.5);
            animation: slideUp 0.4s ease;
            border: 1px solid rgba(255,255,255,0.3);
        }

        .detail-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f0f0f0;
        }

        .detail-date {
            font-size: 18px;
            color: #667eea;
            font-weight: 600;
        }

        .detail-location {
            font-size: 16px;
            color: #666;
            font-weight: 500;
        }

        .detail-content {
            font-size: 16px;
            line-height: 1.8;
            color: #333;
            margin-bottom: 30px;
            white-space: pre-wrap;
        }

        .detail-actions {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }

        .delete-btn {
            background: linear-gradient(135deg, #ff4757 0%, #ff3742 100%);
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .delete-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(255, 71, 87, 0.3);
        }

        /* åŠ è½½å ä½å›¾ */
        .scene-image.fallback {
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 32px;
        }

        /* å“åº”å¼è°ƒæ•´ */
        @media (max-width: 768px) {
            .diary-container {
                flex-direction: column;
                height: 90vh;
            }

            .diary-cover {
                width: 100%;
                height: 30%;
                padding: 20px;
            }

            .diary-content {
                width: 100%;
                height: 70%;
                padding: 20px;
            }

            .diary-title {
                font-size: 24px;
            }

            .scene-container {
                width: 110px;
            }

            .scene-image {
                width: 85px;
                height: 85px;
            }

            .path-container {
                height: 1800px;
            }
        }

        @media (max-width: 480px) {
            .scene-container {
                width: 95px;
            }

            .scene-image {
                width: 75px;
                height: 75px;
            }

            .scene-name {
                font-size: 11px;
                padding: 5px 10px;
            }
        }
    </style>
</head>
<body>
    <!-- è“å¤©ç™½äº‘èƒŒæ™¯ -->
    <div class="sky-background">
        <div class="sun"></div>
        <!-- äº‘æœµ -->
        <div class="cloud" style="top: 15%; width: 200px; height: 60px; animation-delay: 0s;"></div>
        <div class="cloud" style="top: 25%; width: 150px; height: 45px; animation-delay: 15s;"></div>
        <div class="cloud" style="top: 35%; width: 180px; height: 50px; animation-delay: 30s;"></div>
        <div class="cloud" style="top: 45%; width: 120px; height: 35px; animation-delay: 45s;"></div>

        <!-- å°é¸Ÿ -->
        <div class="bird" style="top: 20%; animation-delay: 0s;">ğŸ¦</div>
        <div class="bird" style="top: 30%; animation-delay: 5s;">ğŸ•Šï¸</div>

        <!-- è´è¶ -->
        <div class="butterfly" style="top: 25%; left: 20%; animation-delay: 2s;">ğŸ¦‹</div>
        <div class="butterfly" style="top: 35%; left: 60%; animation-delay: 6s;">ğŸ¦‹</div>
    </div>

    <!-- å¤´éƒ¨ -->
    <div class="header">
        <h1>ğŸ“– My BUPT - æˆ‘çš„æ ¡å›­æ—¥è®°</h1>
        <a href="javascript:window.history.back();" class="back-btn">â† è¿”å›</a>
    </div>

    <!-- ä¸»å†…å®¹åŒº -->
    <div class="main-container">
        <div class="path-container">
            <!-- åœ°é¢ -->
            <div class="ground"></div>

            <!-- è‰åœ°åŒºåŸŸ -->
            <div class="grass-area"></div>

            <!-- çœŸæ­£çš„èœ¿èœ’å°è·¯ - SVGè·¯å¾„ -->
            <svg class="winding-path-svg" viewBox="0 0 1000 1600">
                <!-- ä¸»è¦çš„èœ¿èœ’è·¯å¾„ -->
                <path class="path-curve" d="M500,200 Q300,400 500,600 Q700,800 500,1000 Q300,1200 500,1400 Q700,1600 500,1800" />
                <path class="path-inner" d="M500,200 Q300,400 500,600 Q700,800 500,1000 Q300,1200 500,1400 Q700,1600 500,1800" />
            </svg>

            <!-- 16ä¸ªæ ¡å›­åœºæ™¯ -->
            <!-- åœºæ™¯ä¼šé€šè¿‡JavaScriptåŠ¨æ€æ·»åŠ  -->
        </div>
    </div>

    <!-- æ—¥è®°æœ¬å¼¹çª— -->
    <div class="diary-modal" id="diaryModal">
        <div class="diary-container">
            <!-- å·¦ä¾§å°é¢ -->
            <div class="diary-cover">
                <div class="diary-location-emoji" id="diaryEmoji">ğŸ›ï¸</div>
                <h2 class="diary-title">æ ¡å›­æ—¥è®°æœ¬</h2>
                <div class="diary-location" id="diaryLocation">åœ°ç‚¹ï¼šæœªé€‰æ‹©</div>
            </div>

            <!-- å³ä¾§å†…å®¹ -->
            <div class="diary-content">
                <div class="close-btn" onclick="closeDiaryModal()">Ã—</div>

                <!-- æ ‡ç­¾é¡µ -->
                <div class="diary-tabs">
                    <button class="tab-btn active" onclick="switchTab('view')">ğŸ“– æŸ¥çœ‹æ—¥è®°</button>
                    <button class="tab-btn" onclick="switchTab('write')">âœï¸ å†™æ—¥è®°</button>
                </div>

                <!-- æŸ¥çœ‹æ—¥è®°åŒºåŸŸ -->
                <div class="diary-list" id="diaryList">
                    <!-- æ—¥è®°é¡¹ä¼šåŠ¨æ€åŠ è½½ -->
                </div>

                <!-- å†™æ—¥è®°åŒºåŸŸ -->
                <div class="write-diary" id="writeDiary">
                    <textarea class="diary-textarea" id="diaryContent" placeholder="åœ¨è¿™é‡Œå†™ä¸‹ä½ çš„æ ¡å›­å›å¿†... âœ¨ è®©æ—¶å…‰åœç•™åœ¨æ­¤åˆ»"></textarea>
                    <div class="diary-actions">
                        <button class="cancel-btn" onclick="clearDiaryText()">æ¸…ç©º</button>
                        <button class="save-btn" onclick="saveDiary()">ğŸ’¾ ä¿å­˜æ—¥è®°</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- æ—¥è®°è¯¦æƒ…å¼¹çª— -->
    <div class="diary-detail-modal" id="diaryDetailModal">
        <div class="diary-detail">
            <div class="detail-header">
                <div>
                    <div class="detail-date" id="detailDate">2023å¹´11æœˆ5æ—¥ 14:30</div>
                    <div class="detail-location" id="detailLocation">åœ°ç‚¹ï¼šä½“è‚²åœº</div>
                </div>
                <div class="close-btn" onclick="closeDetailModal()">Ã—</div>
            </div>
            <div class="detail-content" id="detailContent">
                è¿™é‡Œæ˜¯æ—¥è®°å†…å®¹...
            </div>
            <div class="detail-actions">
                <button class="delete-btn" onclick="deleteDiary()">ğŸ—‘ï¸ åˆ é™¤è¿™ç¯‡æ—¥è®°</button>
            </div>
        </div>
    </div>

    <script>
        // APIåŸºç¡€URL
        const API_BASE = '/api';

        // æ ¡å›­åœºæ™¯æ•°æ®
        const campusScenes = [
            { id: 1, name: "ä½“è‚²åœº", emoji: "ğŸŸï¸", image: "/static/ä½“è‚²åœº.jpg" },
            { id: 2, name: "æ•™å­¦å®éªŒç»¼åˆæ¥¼", emoji: "ğŸ¢", image: "/static/æ•™å­¦å®éªŒç»¼åˆæ¥¼.jpg" },
            { id: 3, name: "å›¾ä¹¦é¦†", emoji: "ğŸ“š", image: "/static/å›¾ä¹¦é¦†.jpg" },
            { id: 4, name: "å®¿èˆæ¥¼", emoji: "ğŸ ", image: "/static/å®¿èˆæ¥¼.jpg" },
            { id: 5, name: "ç¤¼å ‚", emoji: "ğŸ­", image: "/static/ç¤¼å ‚.jpg" },
            { id: 6, name: "å­¦ç”Ÿé¤å…", emoji: "ğŸ½ï¸", image: "/static/å­¦ç”Ÿé¤å….jpg" },
            { id: 7, name: "æ ¡å›­æ¹–", emoji: "ğŸŒŠ", image: "/static/æ ¡å›­æ¹–.jpg" },
            { id: 8, name: "é©¬å…‹æ€ä¸»ä¹‰å­¦é™¢", emoji: "ğŸ“˜", image: "/static/é©¬å…‹æ€ä¸»ä¹‰å­¦é™¢.jpg" },
            { id: 9, name: "å·¥ç¨‹å®éªŒæ¥¼", emoji: "ğŸ”¬", image: "/static/å·¥ç¨‹å®éªŒæ¥¼.jpg" },
            { id: 10, name: "ç†å­¦é™¢", emoji: "ğŸ§®", image: "/static/ç†å­¦é™¢.jpg" },
            { id: 11, name: "æ™ºèƒ½å·¥ç¨‹ä¸è‡ªåŠ¨åŒ–å­¦é™¢", emoji: "ğŸ¤–", image: "/static/æ™ºèƒ½å·¥ç¨‹ä¸è‡ªåŠ¨åŒ–å­¦é™¢.jpg" },
            { id: 12, name: "æ•°å­—åª’ä½“ä¸è‰ºæœ¯è®¾è®¡å­¦é™¢", emoji: "ğŸ¨", image: "/static/æ•°å­—åª’ä½“ä¸è‰ºæœ¯è®¾è®¡å­¦é™¢.jpg" },
            { id: 13, name: "ç½‘ç»œç©ºé—´å®‰å…¨å­¦é™¢", emoji: "ğŸ›¡ï¸", image: "/static/ç½‘ç»œç©ºé—´å®‰å…¨å­¦é™¢.jpg" },
            { id: 14, name: "å­¦ç”Ÿæ´»åŠ¨ä¸­å¿ƒ", emoji: "ğŸ‰", image: "/static/å­¦ç”Ÿæ´»åŠ¨ä¸­å¿ƒ.jpg" },
            { id: 15, name: "æ•™èŒå·¥é£Ÿå ‚", emoji: "ğŸ‘¨â€ğŸ«", image: "/static/æ•™èŒå·¥é£Ÿå ‚.jpg" },
            { id: 16, name: "å¤©çŒ«è¶…å¸‚", emoji: "ğŸ›’", image: "/static/å¤©çŒ«è¶…å¸‚.jpg" }
        ];

        let currentLocation = "";
        let currentDiaryId = "";
        let currentUser = null;

        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
        window.onload = async function() {
            // æ£€æŸ¥ç™»å½•çŠ¶æ€
            await checkLoginStatus();

            if (!currentUser) {
                // å¦‚æœæœªç™»å½•ï¼Œè·³è½¬å›é¦–é¡µ
                showAlert('è¯·å…ˆç™»å½•ï¼', 'error');
                setTimeout(() => {
                    window.location.href = '/';
                }, 2000);
                return;
            }

            // æ·»åŠ æ›´å¤šäº‘æœµ
            createClouds();

            // åˆ›å»ºèœ¿èœ’å°è·¯ä¸Šçš„åœºæ™¯
            createScenesOnCurvedPath();

            // æ·»åŠ æ ‘æœ¨å’ŒèŠ±æœµè£…é¥°
            createDecorations();
        };

        // æ£€æŸ¥ç™»å½•çŠ¶æ€
        async function checkLoginStatus() {
            try {
                const response = await fetch(`${API_BASE}/check-login`);
                const data = await response.json();

                if (data.logged_in && data.user) {
                    currentUser = data.user;
                }
            } catch (error) {
                console.error('æ£€æŸ¥ç™»å½•çŠ¶æ€å¤±è´¥:', error);
            }
        }

        // åˆ›å»ºæ›´å¤šäº‘æœµ
        function createClouds() {
            const sky = document.querySelector('.sky-background');
            for (let i = 0; i < 6; i++) {
                const cloud = document.createElement('div');
                cloud.className = 'cloud';
                cloud.style.top = `${Math.random() * 40 + 10}%`;
                cloud.style.left = `${Math.random() * 20}%`;
                cloud.style.width = `${Math.random() * 150 + 80}px`;
                cloud.style.height = `${Math.random() * 40 + 25}px`;
                cloud.style.opacity = Math.random() * 0.4 + 0.3;
                cloud.style.animationDelay = `${Math.random() * 60}s`;
                cloud.style.animationDuration = `${Math.random() * 40 + 40}s`;
                sky.appendChild(cloud);
            }
        }

        // åœ¨èœ¿èœ’å°è·¯ä¸Šåˆ†å¸ƒåœºæ™¯
        function createScenesOnCurvedPath() {
            const container = document.querySelector('.path-container');

            // èœ¿èœ’è·¯å¾„çš„è´å¡å°”æ›²çº¿å‚æ•°
            // M500,200 Q300,400 500,600 Q700,800 500,1000 Q300,1200 500,1400 Q700,1600 500,1800
            const pathSegments = [
                { start: {x: 500, y: 200}, cp: {x: 300, y: 400}, end: {x: 500, y: 600} },
                { start: {x: 500, y: 600}, cp: {x: 700, y: 800}, end: {x: 500, y: 1000} },
                { start: {x: 500, y: 1000}, cp: {x: 300, y: 1200}, end: {x: 500, y: 1400} },
                { start: {x: 500, y: 1400}, cp: {x: 700, y: 1600}, end: {x: 500, y: 1800} }
            ];

            // å°†16ä¸ªåœºæ™¯åˆ†å¸ƒåœ¨è·¯å¾„ä¸Š
            campusScenes.forEach((scene, index) => {
                // è®¡ç®—åœºæ™¯åœ¨è·¯å¾„ä¸Šçš„ä½ç½®ï¼ˆ0-1ä¹‹é—´ï¼‰
                const t = (index + 1) / (campusScenes.length + 1);

                // ç¡®å®šåœ¨å“ªä¸ªè·¯å¾„æ®µä¸Š
                const segmentIndex = Math.floor(t * pathSegments.length);
                const segment = pathSegments[segmentIndex];
                const segmentT = (t * pathSegments.length) - segmentIndex;

                // è®¡ç®—è´å¡å°”æ›²çº¿ä¸Šçš„ç‚¹
                const point = calculateBezierPoint(segment.start, segment.cp, segment.end, segmentT);

                // è½¬æ¢ä¸ºé¡µé¢åæ ‡ï¼ˆSVGè§†å›¾æ¡†åˆ°é¡µé¢ï¼‰
                const xPercent = (point.x / 1000) * 100;
                const yPercent = (point.y / 1800) * 100 + 10; // è°ƒæ•´å‚ç›´ä½ç½®

                // æ·»åŠ éšæœºåç§»ï¼Œè®©åˆ†å¸ƒæ›´è‡ªç„¶
                const randomXOffset = (Math.random() - 0.5) * 8; // -4%åˆ°4%
                const randomYOffset = (Math.random() - 0.5) * 6; // -3%åˆ°3%

                // å†³å®šåœ¨è·¯å¾„çš„å“ªä¸€ä¾§ï¼ˆå·¦å³äº¤æ›¿ï¼‰
                const side = index % 2 === 0 ? 1 : -1;
                const sideOffset = 15 * side; // ç¦»è·¯å¾„çš„è·ç¦»

                // åˆ›å»ºåœºæ™¯å…ƒç´ 
                const sceneDiv = document.createElement('div');
                sceneDiv.className = 'scene-container';
                sceneDiv.style.top = `calc(${yPercent}% + ${randomYOffset}%)`;
                sceneDiv.style.left = `calc(${xPercent}% + ${randomXOffset}% + ${sideOffset}%)`;
                sceneDiv.setAttribute('data-location', scene.name);
                sceneDiv.setAttribute('data-emoji', scene.emoji);

                // æ·»åŠ è½»å¾®æ—‹è½¬ï¼Œä½¿åœºæ™¯æœå‘è·¯å¾„
                const rotation = side * (Math.random() * 15 - 7.5); // -7.5åˆ°7.5åº¦
                sceneDiv.style.transform = `rotate(${rotation}deg)`;

                // åˆ›å»ºå›¾ç‰‡å…ƒç´ 
                const imageDiv = document.createElement('div');
                imageDiv.className = 'scene-image';

                const img = document.createElement('img');
                img.src = scene.image;
                img.alt = scene.name;
                img.loading = 'lazy';
                img.onerror = function() {
                    // å¦‚æœå›¾ç‰‡åŠ è½½å¤±è´¥ï¼Œæ˜¾ç¤ºemojiä½œä¸ºåå¤‡
                    this.style.display = 'none';
                    imageDiv.classList.add('fallback');
                    imageDiv.innerHTML = `<span>${scene.emoji}</span>`;
                };

                // åˆ›å»ºå›¾æ ‡
                const iconDiv = document.createElement('div');
                iconDiv.className = 'scene-icon';
                iconDiv.textContent = scene.emoji;

                // åˆ›å»ºåç§°æ ‡ç­¾
                const nameDiv = document.createElement('div');
                nameDiv.className = 'scene-name';
                nameDiv.textContent = scene.name;

                imageDiv.appendChild(img);
                imageDiv.appendChild(iconDiv);

                sceneDiv.appendChild(imageDiv);
                sceneDiv.appendChild(nameDiv);

                // ç‚¹å‡»äº‹ä»¶
                sceneDiv.onclick = () => openDiary(scene.name, scene.emoji);

                container.appendChild(sceneDiv);
            });
        }

        // è®¡ç®—äºŒæ¬¡è´å¡å°”æ›²çº¿ä¸Šçš„ç‚¹
        function calculateBezierPoint(start, cp, end, t) {
            return {
                x: (1 - t) * (1 - t) * start.x + 2 * (1 - t) * t * cp.x + t * t * end.x,
                y: (1 - t) * (1 - t) * start.y + 2 * (1 - t) * t * cp.y + t * t * end.y
            };
        }

        // åˆ›å»ºè£…é¥°å…ƒç´ ï¼ˆæ ‘æœ¨å’ŒèŠ±æœµï¼‰
        function createDecorations() {
            const container = document.querySelector('.path-container');

            // æ·»åŠ æ ‘æœ¨
            for (let i = 0; i < 15; i++) {
                const tree = document.createElement('div');
                tree.className = 'tree';
                tree.style.top = `${Math.random() * 60 + 30}%`;
                tree.style.left = `${Math.random() * 90 + 5}%`;
                tree.style.transform = `scale(${Math.random() * 0.5 + 0.7})`;
                tree.style.animationDelay = `${Math.random() * 8}s`;

                const trunk = document.createElement('div');
                trunk.className = 'tree-trunk';

                const top = document.createElement('div');
                top.className = 'tree-top';

                tree.appendChild(trunk);
                tree.appendChild(top);
                container.appendChild(tree);
            }

            // æ·»åŠ èŠ±æœµ
            for (let i = 0; i < 25; i++) {
                const flower = document.createElement('div');
                flower.className = 'flower';
                flower.style.top = `${Math.random() * 70 + 30}%`;
                flower.style.left = `${Math.random() * 90 + 5}%`;
                flower.style.transform = `scale(${Math.random() * 0.4 + 0.6})`;
                flower.style.animationDelay = `${Math.random() * 6}s`;

                const stem = document.createElement('div');
                stem.className = 'flower-stem';

                const head = document.createElement('div');
                head.className = 'flower-head';
                head.textContent = 'ğŸŒ¸';

                flower.appendChild(stem);
                flower.appendChild(head);
                container.appendChild(flower);
            }
        }

        // æ‰“å¼€æ—¥è®°æœ¬
        function openDiary(location, emoji) {
            currentLocation = location;

            // æ›´æ–°å¼¹çª—ä¿¡æ¯
            document.getElementById('diaryEmoji').textContent = emoji;
            document.getElementById('diaryLocation').textContent = `åœ°ç‚¹ï¼š${location}`;

            // åŠ è½½è¯¥åœ°ç‚¹çš„æ—¥è®°
            loadDiariesForLocation(location);

            // æ˜¾ç¤ºå¼¹çª—
            document.getElementById('diaryModal').style.display = 'flex';

            // é»˜è®¤æ˜¾ç¤ºæŸ¥çœ‹æ—¥è®°æ ‡ç­¾é¡µ
            switchTab('view');

            // æ¸…ç©ºå†™æ—¥è®°åŒºåŸŸ
            document.getElementById('diaryContent').value = '';
        }

        // å…³é—­æ—¥è®°æœ¬å¼¹çª—
        function closeDiaryModal() {
            document.getElementById('diaryModal').style.display = 'none';
        }

        // åˆ‡æ¢æ ‡ç­¾é¡µ
        function switchTab(tab) {
            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });

            if (tab === 'view') {
                document.querySelector('.tab-btn:nth-child(1)').classList.add('active');
                document.getElementById('diaryList').style.display = 'block';
                document.getElementById('writeDiary').style.display = 'none';
            } else {
                document.querySelector('.tab-btn:nth-child(2)').classList.add('active');
                document.getElementById('diaryList').style.display = 'none';
                document.getElementById('writeDiary').style.display = 'flex';
            }
        }

        // åŠ è½½æŒ‡å®šåœ°ç‚¹çš„æ—¥è®° - è¿æ¥åˆ°åç«¯API
        async function loadDiariesForLocation(location) {
            const diaryList = document.getElementById('diaryList');
            diaryList.innerHTML = '<div class="no-diaries">åŠ è½½ä¸­...</div>';

            try {
                const response = await fetch(`${API_BASE}/bupt/diaries/${encodeURIComponent(location)}`);
                const data = await response.json();

                if (!data.success) {
                    diaryList.innerHTML = `
                        <div class="no-diaries">
                            <div style="font-size: 48px; margin-bottom: 15px;">ğŸ“</div>
                            <div>åŠ è½½æ—¥è®°å¤±è´¥</div>
                            <div style="font-size: 14px; color: #999; margin-top: 10px;">è¯·ç¨åé‡è¯•</div>
                        </div>
                    `;
                    return;
                }

                const locationDiaries = data.diaries || [];

                if (locationDiaries.length === 0) {
                    diaryList.innerHTML = `
                        <div class="no-diaries">
                            <div style="font-size: 48px; margin-bottom: 15px;">ğŸ“</div>
                            <div>è¿˜æ²¡æœ‰å…³äº${location}çš„æ—¥è®°</div>
                            <div style="font-size: 14px; color: #999; margin-top: 10px;">ç‚¹å‡»ä¸Šæ–¹"å†™æ—¥è®°"å¼€å§‹è®°å½•å§ï½</div>
                        </div>
                    `;
                    return;
                }

                // ç”Ÿæˆæ—¥è®°åˆ—è¡¨HTML
                const diariesHTML = locationDiaries.map((diary, index) => {
                    // æˆªå–å‰100ä¸ªå­—ç¬¦ä½œä¸ºé¢„è§ˆ
                    const preview = diary.content.length > 100 ?
                        diary.content.substring(0, 100) + '...' :
                        diary.content;

                    return `
                        <div class="diary-item" onclick="viewDiaryDetail('${diary.id}')">
                            <div class="diary-date">ğŸ“… ${formatDate(diary.created_at)}</div>
                            <div class="diary-preview">${preview}</div>
                        </div>
                    `;
                }).join('');

                diaryList.innerHTML = diariesHTML;

            } catch (error) {
                console.error('åŠ è½½æ—¥è®°å¤±è´¥:', error);
                diaryList.innerHTML = `
                    <div class="no-diaries">
                        <div style="font-size: 48px; margin-bottom: 15px;">ğŸ“</div>
                        <div>åŠ è½½æ—¥è®°å¤±è´¥</div>
                        <div style="font-size: 14px; color: #999; margin-top: 10px;">ç½‘ç»œé”™è¯¯ï¼Œè¯·ç¨åé‡è¯•</div>
                    </div>
                `;
            }
        }

        // æ ¼å¼åŒ–æ—¥æœŸ
        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleString('zh-CN', {
                year: 'numeric',
                month: '2-digit',
                day: '2-digit',
                hour: '2-digit',
                minute: '2-digit',
                hour12: false
            });
        }

        // ä¿å­˜æ—¥è®° - è¿æ¥åˆ°åç«¯API
        async function saveDiary() {
            const content = document.getElementById('diaryContent').value.trim();

            if (!content) {
                showAlert('æ—¥è®°å†…å®¹ä¸èƒ½ä¸ºç©ºå“¦ï½', 'error');
                return;
            }

            if (!currentLocation) {
                showAlert('è¯·å…ˆé€‰æ‹©åœ°ç‚¹ï¼', 'error');
                return;
            }

            if (!currentUser) {
                showAlert('è¯·å…ˆç™»å½•ï¼', 'error');
                return;
            }

            try {
                // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
                const saveBtn = document.querySelector('.save-btn');
                const originalText = saveBtn.textContent;
                saveBtn.textContent = 'ä¿å­˜ä¸­...';
                saveBtn.disabled = true;

                const response = await fetch(`${API_BASE}/bupt/diaries`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        location: currentLocation,
                        content: content
                    })
                });

                const data = await response.json();

                // æ¢å¤æŒ‰é’®çŠ¶æ€
                saveBtn.textContent = originalText;
                saveBtn.disabled = false;

                if (data.success) {
                    // æ¸…ç©ºæ–‡æœ¬æ¡†
                    document.getElementById('diaryContent').value = '';

                    // æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯
                    showAlert('æ—¥è®°ä¿å­˜æˆåŠŸï¼', 'success');

                    // åˆ‡æ¢åˆ°æŸ¥çœ‹æ ‡ç­¾é¡µå¹¶åˆ·æ–°åˆ—è¡¨
                    switchTab('view');
                    await loadDiariesForLocation(currentLocation);

                } else {
                    showAlert(data.message || 'ä¿å­˜å¤±è´¥', 'error');
                }
            } catch (error) {
                console.error('ä¿å­˜æ—¥è®°å¤±è´¥:', error);
                showAlert('ä¿å­˜å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥', 'error');
                const saveBtn = document.querySelector('.save-btn');
                saveBtn.textContent = 'ğŸ’¾ ä¿å­˜æ—¥è®°';
                saveBtn.disabled = false;
            }
        }

        // æ¸…ç©ºæ—¥è®°æ–‡æœ¬æ¡†
        function clearDiaryText() {
            if (confirm('ç¡®å®šè¦æ¸…ç©ºå½“å‰æ—¥è®°å†…å®¹å—ï¼Ÿ')) {
                document.getElementById('diaryContent').value = '';
            }
        }

        // æŸ¥çœ‹æ—¥è®°è¯¦æƒ… - è¿æ¥åˆ°åç«¯API
        async function viewDiaryDetail(diaryId) {
            try {
                const response = await fetch(`${API_BASE}/bupt/diaries/detail/${diaryId}`);
                const data = await response.json();

                if (!data.success) {
                    showAlert('åŠ è½½æ—¥è®°è¯¦æƒ…å¤±è´¥', 'error');
                    return;
                }

                const diary = data.diary;

                // ä¿å­˜å½“å‰æ—¥è®°IDï¼ˆç”¨äºåˆ é™¤æ“ä½œï¼‰
                currentDiaryId = diary.id;
                currentLocation = diary.location;

                // æ›´æ–°è¯¦æƒ…å¼¹çª—å†…å®¹
                document.getElementById('detailDate').textContent = formatDate(diary.created_at);
                document.getElementById('detailLocation').textContent = `åœ°ç‚¹ï¼š${diary.location}`;
                document.getElementById('detailContent').textContent = diary.content;

                // æ˜¾ç¤ºè¯¦æƒ…å¼¹çª—
                document.getElementById('diaryDetailModal').style.display = 'flex';

            } catch (error) {
                console.error('æŸ¥çœ‹æ—¥è®°è¯¦æƒ…å¤±è´¥:', error);
                showAlert('åŠ è½½æ—¥è®°è¯¦æƒ…å¤±è´¥', 'error');
            }
        }

        // å…³é—­è¯¦æƒ…å¼¹çª—
        function closeDetailModal() {
            document.getElementById('diaryDetailModal').style.display = 'none';
        }

        // åˆ é™¤æ—¥è®° - è¿æ¥åˆ°åç«¯API
        async function deleteDiary() {
            if (!confirm('ç¡®å®šè¦åˆ é™¤è¿™ç¯‡æ—¥è®°å—ï¼Ÿåˆ é™¤åæ— æ³•æ¢å¤ã€‚')) {
                return;
            }

            try {
                const response = await fetch(`${API_BASE}/bupt/diaries/${currentDiaryId}`, {
                    method: 'DELETE'
                });

                const data = await response.json();

                if (data.success) {
                    // å…³é—­è¯¦æƒ…å¼¹çª—
                    closeDetailModal();

                    // é‡æ–°åŠ è½½æ—¥è®°åˆ—è¡¨
                    await loadDiariesForLocation(currentLocation);

                    // æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯
                    showAlert('æ—¥è®°å·²åˆ é™¤', 'success');
                } else {
                    showAlert(data.message || 'åˆ é™¤å¤±è´¥', 'error');
                }
            } catch (error) {
                console.error('åˆ é™¤æ—¥è®°å¤±è´¥:', error);
                showAlert('åˆ é™¤å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥', 'error');
            }
        }

        // æ˜¾ç¤ºæ¶ˆæ¯æç¤º
        function showAlert(message, type) {
            const colors = {
                success: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
                error: 'linear-gradient(135deg, #ff4757 0%, #ff3742 100%)'
            };

            const messageDiv = document.createElement('div');
            messageDiv.textContent = message;
            messageDiv.style.cssText = `
                position: fixed;
                top: 100px;
                right: 20px;
                background: ${colors[type] || colors.success};
                color: white;
                padding: 15px 25px;
                border-radius: 12px;
                z-index: 2000;
                box-shadow: 0 15px 30px rgba(0,0,0,0.4);
                font-weight: 600;
                animation: slideInRight 0.4s ease;
                backdrop-filter: blur(10px);
                border: 1px solid rgba(255,255,255,0.2);
            `;
            document.body.appendChild(messageDiv);

            setTimeout(() => {
                messageDiv.style.animation = 'slideOutRight 0.4s ease';
                setTimeout(() => document.body.removeChild(messageDiv), 400);
            }, 2000);

            // æ·»åŠ åŠ¨ç”»æ ·å¼ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰
            if (!document.getElementById('alertAnimations')) {
                const style = document.createElement('style');
                style.id = 'alertAnimations';
                style.textContent = `
                    @keyframes slideInRight {
                        from { transform: translateX(100%); opacity: 0; }
                        to { transform: translateX(0); opacity: 1; }
                    }
                    @keyframes slideOutRight {
                        from { transform: translateX(0); opacity: 1; }
                        to { transform: translateX(100%); opacity: 0; }
                    }
                `;
                document.head.appendChild(style);
            }
        }

        // ESCé”®å…³é—­å¼¹çª—
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                if (document.getElementById('diaryModal').style.display === 'flex') {
                    closeDiaryModal();
                }
                if (document.getElementById('diaryDetailModal').style.display === 'flex') {
                    closeDetailModal();
                }
            }
        });

        // ç‚¹å‡»å¼¹çª—å¤–å±‚å…³é—­
        document.getElementById('diaryModal').onclick = function(e) {
            if (e.target === this) closeDiaryModal();
        };
        document.getElementById('diaryDetailModal').onclick = function(e) {
            if (e.target === this) closeDetailModal();
        };
    </script>
</body>
</html>